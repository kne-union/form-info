"use strict";(self.webpackChunk_kne_components_form_info=self.webpackChunk_kne_components_form_info||[]).push([[257,638],{39638(e,t,n){n.r(t),n.d(t,{Global:()=>C,GlobalSetting:()=>P,GlobalValue:()=>m,Preset:()=>g,PresetProvider:()=>d,Provider:()=>s,SelectProvider:()=>b,context:()=>u,createContext:()=>l,default:()=>u,presetContext:()=>i,selectorContext:()=>f,useContext:()=>c,useGlobalContext:()=>a,useGlobalValue:()=>h,usePreset:()=>v,useSelectorContext:()=>x});var r=n(94922),o=n.n(r);const l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,r.createContext)(e),{Provider:n,Consumer:o}=t;return{context:t,Provider:n,Consumer:o,useContext:()=>(0,r.useContext)(t)}},u=l({}),{Provider:s,useContext:c}=u,a=c,i=l({}),{Provider:d,useContext:v}=i,f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:t,Provider:n,useContext:u}=l(e);return{context:t,Provider:e=>{let{value:t,children:l}=e;const u=(0,r.useRef)();let s=u.current;if(!s){const e=new Set;s={value:t,subscribe:t=>(e.add(t),()=>e.delete(t)),notify:()=>e.forEach(e=>e())},u.current=s}return(0,r.useEffect)(()=>{Object.is(s.value,t)||(s.value=t,s.notify())}),o().createElement(n,{value:s},l)},useContext:e=>{const t=u();return(0,r.useSyncExternalStore)(t.subscribe||(()=>{}),()=>e(t.value))}}}({}),{Provider:b,useContext:x}=f,C=e=>{let{preset:t,children:n,initValue:l}=e;const[u,c]=(0,r.useState)(Object.assign({},l)),a=(0,r.useCallback)((e,t)=>{c(n=>Object.assign({},n,{[e]:"function"===typeof t?t(n[e]):t}))},[]);return o().createElement(s,{value:{global:u,setGlobal:c,setGlobalValue:a}},o().createElement(d,{value:t},o().createElement(b,{value:u},n)))},P=e=>{let{loader:t,needReady:n=!0,children:o}=e;const[l,u]=(0,r.useState)(!1),{global:s,setGlobal:a}=c(),i=(0,r.useRef)(null),d=(0,r.useRef)(t);return(0,r.useEffect)(()=>{Promise.resolve(d.current).then(e=>{a(t=>{const n=Object.assign({},t,e);return i.current=n,n})})},[]),(0,r.useEffect)(()=>{s===i.current&&u(!0)},[s]),n&&!l?null:o},h=e=>x(t=>null==t?void 0:t[e]),m=e=>{let{globalKey:t,children:n}=e;return n({value:h(t)})},g=e=>{let{children:t}=e;return t(v())}}}]);
//# sourceMappingURL=257.69e227ef.chunk.js.map